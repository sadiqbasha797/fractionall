<div class="min-h-screen flex bg-gray-700">
  <!-- Sidebar -->
  <app-sidebar 
    [isMobileMenuOpen]="isSidebarOpen"
    [isMobile]="isMobile"
    (sidebarClose)="toggleSidebar()">
  </app-sidebar>

  <!-- Overlay -->
  <div 
    *ngIf="isSidebarOpen && isMobile"
    (click)="toggleSidebar()"
    class="fixed inset-0 bg-black bg-opacity-50 z-[65]">
  </div>

  <!-- Main content -->
  <!-- reserve space for the fixed sidebar on desktop or when sidebar is open on mobile -->
  <div class="flex-1 flex flex-col bg-gray-700 min-w-0" [class.ml-64]="!isMobile || isSidebarOpen">
    <!-- Navbar - Fixed at top -->
    <div class="z-50 fixed top-0 right-0" [class.left-64]="!isMobile || isSidebarOpen" [class.left-0]="isMobile && !isSidebarOpen">
      <app-navbar (menuClick)="toggleSidebar()"></app-navbar>
    </div>
    
    <!-- Mobile menu button - show on mobile devices even with desktop view -->
    <button 
      *ngIf="!isSidebarOpen && isMobile"
      class="fixed top-4 left-4 z-[60] p-2 rounded-lg bg-gray-800 text-white hover:bg-gray-700 transition-colors shadow-lg"
      (click)="toggleSidebar()"
      type="button">
      <svg 
        class="w-6 h-6" 
        fill="none" 
        stroke="currentColor" 
        viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
    </button>
    
    <!-- Page Content - Scrollable area below navbar with proper padding -->
    <main class="flex-1 bg-gray-700 overflow-y-auto pt-16" style="height: 100vh;">
      <div *ngIf="isLoading" class="flex items-center justify-center h-full">
        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
      </div>
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>
